<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador Libre Deuda - Celina</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f0f2f5; display: flex; justify-content: center; padding: 40px; }
        .card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        .logo-box { text-align: center; margin-bottom: 20px; }
        .logo-box img { width: 300px; height: auto; } /* Logo alargado */
        h2 { color: #1a3a8a; text-align: center; text-transform: uppercase; font-size: 18px; }
        .field { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 13px; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; background: #1a3a8a; color: white; border: none; padding: 15px; border-radius: 5px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn:hover { background: #122a63; }
        .note { font-size: 12px; color: #666; font-style: italic; margin-top: 10px; text-align: center; }
    </style>
</head>
<body>

<div class="card">
    <div class="logo-box">
        <img src="logo_celina.PNG" alt="Swiss Medical">
    </div>
    
    <h2>Certificado Libre Deuda</h2>

    <div class="field">
        <label>Fecha</label>
        <input type="date" id="fecha">
    </div>

    <div class="field">
        <label>Nombre Completo del Asegurado</label>
        <input type="text" id="asegurado" placeholder="Ej: VERDI GARCIA ELIMAR">
    </div>

    <div class="field">
        <label>Ramo</label>
        <select id="ramo">
            <option value="ACCIDENTES PERSONALES">Accidentes Personales</option>
            <option value="RESPONSABILIDAD CIVIL">Responsabilidad Civil</option>
            <option value="AUTOMOTOR">Automotor</option>
        </select>
    </div>

    <div class="field">
        <label>Número de Póliza</label>
        <input type="text" id="poliza" placeholder="Ej: 874673">
    </div>

    <button class="btn" onclick="generarPDF()">REALIZAR CERTIFICADO DE LIBRE DEUDA</button>
    <p class="note">El PDF incluirá automáticamente la leyenda de no registro de deuda.</p>
</div>

<script>
    async function generarPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        const fechaVal = document.getElementById('fecha').value;
        const asegurado = document.getElementById('asegurado').value.toUpperCase();
        const ramo = document.getElementById('ramo').value;
        const poliza = document.getElementById('poliza').value;

        if(!fechaVal || !asegurado || !poliza) {
            alert("Por favor completa todos los campos.");
            return;
        }

        // Formatear fecha a DD/MM/AAAA [Petición del usuario]
        const f = fechaVal.split('-');
        const fechaHumana = `${f[2]}/${f[1]}/${f[0]}`;

        // --- CONSTRUCCIÓN DEL PDF ---
        
        // Título Principal
        doc.setFontSize(16);
        doc.setTextColor(26, 58, 138); // Azul institucional
        doc.text("CERTIFICADO DE LIBRE DEUDA", 105, 40, { align: "center" });

        // Datos del Asegurado
        doc.setFontSize(12);
        doc.setTextColor(0, 0, 0);
        doc.setFont("helvetica", "bold");
        doc.text("Asegurado", 20, 60);
        doc.setFont("helvetica", "normal");
        doc.text(`Nombre: ${asegurado}`, 20, 68);
        
        // Línea divisoria
        doc.line(20, 75, 190, 75);

        // Datos de la Póliza
        doc.setFont("helvetica", "bold");
        doc.text("Póliza", 20, 85);
        doc.setFont("helvetica", "normal");
        doc.text(`Fecha de emisión: ${fechaHumana}`, 20, 93);
        doc.text(`Nro. de póliza: ${poliza}`, 20, 101);
        doc.text(`Ramo: ${ramo}`, 20, 109);

        // LEYENDA PRINCIPAL [Petición del usuario]
        doc.setFont("helvetica", "bold");
        doc.text("Por el presente certificado se informa que la póliza de referencia", 20, 125);
        doc.text("a la fecha no registra deuda.", 20, 132);

        // Advertencia (Basada en el PDF original)
        doc.setFontSize(10);
        doc.setFont("helvetica", "italic");
        doc.text("Este certificado tiene carácter de provisorio con una validez de 15 días.", 20, 150);

        // Pie de página simulado
        doc.setFontSize(9);
        doc.setFont("helvetica", "normal");
        doc.text("COMPAÑIA ARGENTINA DE SEGUROS S.A.", 105, 180, { align: "center" });
        doc.text("Jefe de Suscripción Riesgos Masivos", 105, 185, { align: "center" });

        // Descarga
        doc.save(`LibreDeuda_${asegurado}.pdf`);
    }
</script>

</body>
</html>
