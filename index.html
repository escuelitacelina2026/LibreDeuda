<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Certificado Libre Deuda - Celina</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 100%; max-width: 450px; }
        .logo { text-align: center; margin-bottom: 20px; }
        .logo img { width: 300px; height: auto; }
        h2 { color: #1a3a8a; text-align: center; text-transform: uppercase; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 14px; }
        input, select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .btn { width: 100%; background: #1a3a8a; color: white; border: none; padding: 15px; border-radius: 4px; font-weight: bold; cursor: pointer; font-size: 16px; margin-top: 10px; }
        .btn:hover { background: #122a63; }
    </style>
</head>
<body>

<div class="container">
    <div class="logo">
        <img src="logo_celina.PNG" id="imgLogo" alt="Swiss Medical">
    </div>
    
    <h2>Libre Deuda</h2>

    <div class="form-group">
        <label>Fecha de Emisión</label>
        <input type="date" id="fecha">
    </div>

    <div class="form-group">
        <label>Nombre del Asegurado/a</label>
        <input type="text" id="asegurado" placeholder="Ej: VERDI GARCIA ELIMAR">
    </div>

    <div class="form-group">
        <label>Ramo</label>
        <select id="ramo">
            <option value="ACCIDENTES PERSONALES">Accidentes Personales</option>
            <option value="RESPONSABILIDAD CIVIL">Responsabilidad Civil</option>
            <option value="AUTOMOTOR">Automotor</option>
        </select>
    </div>

    <div class="form-group">
        <label>Número de Póliza</label>
        <input type="text" id="poliza" placeholder="Ej: 874673">
    </div>

    <button class="btn" onclick="descargarPDF()">GENERAR PDF CON LOGO</button>
</div>

<script>
    function descargarPDF() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        
        const fechaRaw = document.getElementById('fecha').value;
        const asegurado = document.getElementById('asegurado').value.toUpperCase();
        const ramo = document.getElementById('ramo').value;
        const poliza = document.getElementById('poliza').value;
        const img = document.getElementById('imgLogo');

        if(!fechaRaw || !asegurado || !poliza) {
            alert("Completa todos los campos.");
            return;
        }

        const [y, m, d] = fechaRaw.split('-');
        const fechaFinal = `${d}/${m}/${y}`;

        // 1. Agregar LOGO al PDF
        try {
            doc.addImage(img, 'PNG', 15, 15, 60, 15); 
        } catch (e) {
            console.error("No se pudo cargar el logo en el PDF", e);
        }

        // 2. Título
        doc.setFontSize(16);
        doc.setTextColor(26, 58, 138);
        doc.setFont("helvetica", "bold");
        doc.text("CERTIFICADO DE LIBRE DEUDA", 105, 45, { align: "center" });

        // 3. Datos del Cuerpo
        doc.setFontSize(11);
        doc.setTextColor(0, 0, 0);
        doc.setFont("helvetica", "bold");
        doc.text("Asegurado", 20, 65);
        doc.setFont("helvetica", "normal");
        doc.text(`Nombre: ${asegurado}`, 20, 72);
        
        doc.line(20, 78, 190, 78); // Línea estética

        doc.setFont("helvetica", "bold");
        doc.text("Póliza", 20, 88);
        doc.setFont("helvetica", "normal");
        doc.text(`Fecha de emisión: ${fechaFinal}`, 20, 96);
        doc.text(`Nro. de póliza: ${poliza}`, 20, 104);
        doc.text(`Ramo: ${ramo}`, 20, 112);

        // 4. LEYENDA PRINCIPAL
        doc.setFont("helvetica", "bold");
        doc.text("Por el presente certificado se informa que la póliza de referencia", 20, 130);
        doc.text("a la fecha no registra deuda.", 20, 137);

        // 5. TEXTO ADICIONAL (Basado en el adjunto)
        doc.setFont("helvetica", "normal");
        doc.setFontSize(9);
        const textoLegal = "Esta Cobertura no reemplaza las obligaciones emanadas de la ley 24557 y sus Reglamentaciones. El siguiente certificado se emite bajo las condiciones establecidas en la poliza objeto de cobertura y con plena vigencia de las cláusulas impresas en la misma (cl. 983 Cláusula de cobranza de premio y otras).";
        const splitTexto = doc.splitTextToSize(textoLegal, 170);
        doc.text(splitTexto, 20, 155);

        // 6. PIE DE PÁGINA (SMG SEGUROS)
        doc.setFontSize(8);
        doc.setTextColor(100, 100, 100);
        const piePagina = "SMG Compañía Argentina de Seguros S.A.\nEdificio Blue Sky - Av. del Libertador 1068 (C1112ABN) Buenos Aires\nTel: (54-11) 5239-6300 / Fax: (54-11) 5239-6301 - www.smgseguros.com.ar";
        doc.text(piePagina, 105, 275, { align: "center" });

        // Guardar
        doc.save(`LibreDeuda_${asegurado}.pdf`);
    }
</script>

</body>
</html>
